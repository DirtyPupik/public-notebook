<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>IA32_EFER</title>
</head><body><b>EFER - Extended Feature Enables Register</b><br/>
<br/>
***Model-Specific Registers (MSRs) can only be set and accessed by <b>privileged code running in Ring 0</b><br/>
<br/>
<br/>
this msr sets the LME bit, which enables 64 bit long mode <br/>
<br/>
<img src="image.png" width="700" height="386" /><br/>
<br/>
The IA32_EFER register is a model-specific register (MSR), which means it is directly accessible by software running in <b>privileged mode (Ring 0)</b>&nbsp;on x86 processors. As an MSR, it can be read and written by using special instructions such as RDMSR (Read MSR) and WRMSR (Write MSR).<br/>
<br/>
To enable or disable the Long Mode Enable (LME) bit in the IA32_EFER register, software running in privileged mode (usually an operating system kernel) needs to perform a write operation to the IA32_EFER register. Specifically, the software sets or clears the LME bit depending on whether it wants to enable or disable long mode.<br/>
<br/>
The sequence of steps to enable 64-bit long mode is typically as follows:<ul><li>Check CPU Capability: </li>
<li style="list-style-type: none"><ul><li>Check CPUID Support: The operating system first checks if the CPU supports the CPUID instruction.</li>
<li>Execute CPUID instruction with a specific function number in the EAX register. The function number determines what information the CPUID instruction returns.</li>
<li>Check Feature Flags</li>
<li>Determine Long Mode Support</li>
<li>Proceed with Enabling Long Mode</li>
</ul>
</li>
<li>Enable PAE: If the CPU supports Physical Address Extension (PAE), the PAE mode is enabled by setting the PAE bit in the CR4 (Control Register 4).</li>
<li>Set LME Bit: The operating system writes a value to the IA32_EFER register to set the LME bit (bit 8) to 1, enabling long mode.</li>
<li>Transition to 64-bit Mode: After enabling the LME bit, the operating system performs a special operation (e.g., loading a long-mode Global Descriptor Table (GDT) and a long-mode code segment descriptor) to transition the CPU into 64-bit long mode.</li>
<li>Execution in 64-bit Mode: Once the CPU is in long mode, it can execute 64-bit instructions and use 64-bit general-purpose registers.</li>
</ul>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
</body></html>